{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jdpqx\\\\Downloads\\\\manzanas-main (1)\\\\manzanas-main\\\\manzanas\\\\frontend\\\\src\\\\pages\\\\Formu.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport formu from '../assets/css/Formu.css';\nimport FormHeader from \"../componentes/formulario/header\";\nimport FormSelect from \"../componentes/\";\nimport FormInput from \"./FormInput\";\nimport FormButton from \"./FormButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Formu() {\n  _s();\n  const [tipoDocumento, setTipo] = useState('');\n  const [documento, setDocumento] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate(); // Para redirigir\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!tipoDocumento || !documento) {\n      alert('Todos los campos son obligatorios');\n      return;\n    }\n    setLoading(true);\n    const login = {\n      TipoDocumento: tipoDocumento,\n      Documento: documento\n    };\n    try {\n      const res = await fetch('http://localhost:5000/api/iniciar', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(login)\n      });\n      const result = await res.json();\n      console.log(result);\n      if (result.success) {\n        alert(result.message);\n        if (result.data && result.data.Rol === 'administrador') {\n          navigate('/administrador');\n        } else {\n          navigate('/usuario');\n        }\n      } else {\n        alert(result.message || 'Credenciales incorrectas');\n      }\n    } catch (error) {\n      console.error(error);\n      alert('Error de conexión');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Ingresarbody\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(FormHeader, {\n        title: \"Iniciar Sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"login-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n          className: \"form-fieldset\",\n          children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n            className: \"sr-only\",\n            children: \"Datos de acceso\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormSelect, {\n            label: \"Tipo de Documento\",\n            id: \"TipoDocumento\",\n            value: tipoDocumento,\n            onChange: e => setTipo(e.target.value),\n            options: [{\n              value: \"TI\",\n              label: \"TI\"\n            }, {\n              value: \"CC\",\n              label: \"CC\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"N\\xFAmero de Documento\",\n            id: \"Documento\",\n            value: documento,\n            onChange: e => setDocumento(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          children: [/*#__PURE__*/_jsxDEV(FormButton, {\n            type: \"submit\",\n            disabled: loading,\n            loading: loading,\n            children: \"INICIAR SESI\\xD3N\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"boton back-button\",\n            onClick: () => navigate(\"/\"),\n            children: \"Atr\\xE1s\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(Formu, \"XDEGhrX48rcy+fwj5Paa2U/aBvE=\", false, function () {\n  return [useNavigate];\n});\n_c = Formu;\nexport default Formu;\nvar _c;\n$RefreshReg$(_c, \"Formu\");","map":{"version":3,"names":["React","useState","useNavigate","formu","FormHeader","FormSelect","FormInput","FormButton","jsxDEV","_jsxDEV","Formu","_s","tipoDocumento","setTipo","documento","setDocumento","loading","setLoading","navigate","handleSubmit","e","preventDefault","alert","login","TipoDocumento","Documento","res","fetch","method","headers","credentials","body","JSON","stringify","result","json","console","log","success","message","data","Rol","error","className","children","title","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","label","id","value","onChange","target","options","type","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/Users/jdpqx/Downloads/manzanas-main (1)/manzanas-main/manzanas/frontend/src/pages/Formu.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; \nimport formu from '../assets/css/Formu.css'\nimport FormHeader from \"../componentes/formulario/header\";\nimport FormSelect from \"../componentes/\";\nimport FormInput from \"./FormInput\";\nimport FormButton from \"./FormButton\";\n\nfunction Formu() {\n  const [tipoDocumento, setTipo] = useState('');\n  const [documento, setDocumento] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate(); // Para redirigir\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!tipoDocumento || !documento) {\n      alert('Todos los campos son obligatorios');\n      return;\n    }\n\n    setLoading(true);\n\n    const login = {\n      TipoDocumento: tipoDocumento,\n      Documento: documento,\n    };\n\n    try {\n      const res = await fetch('http://localhost:5000/api/iniciar', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(login)\n      });\n\n      const result = await res.json();\n      console.log(result)\n      \n      if (result.success) {\n          alert(result.message);\n          \n          if (result.data && result.data.Rol === 'administrador') {\n                navigate('/administrador');\n              } else {\n                navigate('/usuario');\n              }\n        } \n        else {\n        alert(result.message || 'Credenciales incorrectas');\n      }\n\n    } catch (error) {\n      console.error(error);\n      alert('Error de conexión');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"Ingresarbody\">\n      <main className=\"login-container\">\n        <FormHeader title=\"Iniciar Sesión\" />\n\n        <form className=\"login-form\" onSubmit={handleSubmit}>\n          <fieldset className=\"form-fieldset\">\n            <legend className=\"sr-only\">Datos de acceso</legend>\n\n            <FormSelect\n              label=\"Tipo de Documento\"\n              id=\"TipoDocumento\"\n              value={tipoDocumento}\n              onChange={(e) => setTipo(e.target.value)}\n              options={[\n                { value: \"TI\", label: \"TI\" },\n                { value: \"CC\", label: \"CC\" },\n              ]}\n            />\n\n            <FormInput\n              label=\"Número de Documento\"\n              id=\"Documento\"\n              value={documento}\n              onChange={(e) => setDocumento(e.target.value)}\n            />\n          </fieldset>\n\n          <div className=\"form-actions\">\n            <FormButton type=\"submit\" disabled={loading} loading={loading}>\n              INICIAR SESIÓN\n            </FormButton>\n\n            <button\n              type=\"button\"\n              className=\"boton back-button\"\n              onClick={() => navigate(\"/\")}\n            >\n              Atrás\n            </button>\n          </div>\n        </form>\n      </main>\n    </div>\n  )\n}\n\nexport default Formu;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}